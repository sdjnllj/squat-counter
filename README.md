# 蹲起计数器

一个基于Web的蹲起运动计数器应用，使用设备的加速度传感器和陀螺仪来检测蹲起动作。

## 功能特点

- 实时检测蹲起动作
- 自适应的动作速度设置
- 详细的调试信息显示
- 音效反馈
- 响应式界面设计

## 技术实现

### 1. 传感器使用
- 使用 `DeviceMotionEvent` 获取设备加速度数据
- 使用 `DeviceOrientationEvent` 获取设备方向数据
- 使用滑动窗口（大小为5）对传感器数据进行平滑处理

### 2. 动作检测算法

#### 关键参数
- **基础阈值**：
  - 站立状态：Y轴加速度 -7，Beta角度 40°
  - 下蹲状态：Y轴加速度 -4，Beta角度 60°

- **变化量要求**：
  - 基础加速度变化：0.5
  - 基础角度变化：3.0°
  - 随速度设置动态调整（系数 = 速度/5）

- **时间窗口**：
  - 最小动作时间：600ms
  - 最大动作时间：4000ms
  - 冷却时间：300ms

#### 检测逻辑
1. **站立到下蹲**：
   - 时间间隔 > 冷却时间
   - 加速度或角度超过下蹲阈值
   - 变化量满足要求

2. **下蹲到起立**：
   - 时间间隔 > 最小动作时间
   - 加速度或角度达到站立阈值
   - 变化量满足要求

3. **完成计数**：
   - 时间间隔 > 冷却时间
   - 回到站立状态（允许20%误差）
   - 变化量满足要求

### 3. 速度设置指南

- **慢速模式** (1-3)：
  - 适合初学者
  - 动作要求较宽松
  - 时间窗口较大

- **中速模式** (4-7)：
  - 适合日常练习
  - 平衡的检测参数
  - 适中的时间窗口

- **快速模式** (8-10)：
  - 适合熟练者
  - 更严格的变化量要求
  - 较短的时间窗口

## 开发历程

### v1.0.0
- 基础功能实现
- 简单的动作检测

### v1.1.0
- 添加音效反馈
- 优化界面设计

### v1.2.0
- 添加调试信息显示
- 引入速度调节功能

### v1.3.0
- 优化检测算法
- 添加状态机逻辑

### v1.4.0
- 引入变化量检测
- 优化阈值设置

### v1.4.4 (当前版本)
- 简化检测条件
- 优化速度设置说明
- 改进调试信息显示

## 使用建议

1. **初次使用**：
   - 设置速度为3（慢速模式）
   - 观察调试信息了解动作识别情况
   - 确保动作幅度足够大

2. **进阶使用**：
   - 逐渐提高速度设置
   - 保持动作规范
   - 通过调试信息优化动作

3. **注意事项**：
   - 保持手机相对稳定
   - 避免过快的动作
   - 确保动作完整性

## 未来改进方向

1. **算法优化**：
   - 支持更多运动类型
   - 提高检测准确性
   - 自适应阈值调整

2. **功能扩展**：
   - 运动数据统计
   - 训练计划制定
   - 社交分享功能

3. **用户体验**：
   - 更多自定义选项
   - 更丰富的反馈方式
   - 多语言支持

## 技术栈

- HTML5
- CSS3
- JavaScript (ES6+)
- Web API (DeviceMotion, DeviceOrientation)

## 浏览器支持

- Chrome for Android
- Safari for iOS
- 其他支持设备传感器的现代浏览器

## 许可证

MIT License
